<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TV Dashboard — Axxess</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    :root{--bg1:#667eea;--bg2:#764ba2;}
    *{box-sizing:border-box;}
    body{
      margin:0; min-height:100vh; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      background: linear-gradient(135deg,var(--bg1),var(--bg2)); color:white; display:flex; align-items:center; justify-content:center; padding:20px;
    }
    .wrap { width:100%; max-width:1200px; }
    header { display:flex; align-items:center; gap:14px; margin-bottom:18px; }
    header img { width:72px; height:72px; border-radius:10px; object-fit:cover; box-shadow:0 10px 30px rgba(0,0,0,0.3); }
    h1 { margin:0; font-size:28px; }
    .grid { display:grid; gap:18px; grid-template-columns: 1fr 1fr; }
    .card { background: rgba(255,255,255,0.06); padding:14px; border-radius:14px; box-shadow:0 8px 20px rgba(0,0,0,0.25); }
    .agentRow { display:flex; align-items:center; justify-content:space-between; padding:10px 6px; border-radius:10px; }
    .agentLeft { display:flex; gap:12px; align-items:center; }
    .pill { background: rgba(255,255,255,0.08); padding:6px 10px; border-radius:999px; font-weight:700; }
    .barOuter { width:240px; height:12px; background: rgba(255,255,255,0.06); border-radius:999px; overflow:hidden; }
    .barInner { height:100%; background: linear-gradient(90deg,#34d399,#3b82f6); }
    .center { text-align:center; }
    .big { font-size:36px; font-weight:800; }
    .muted { opacity:0.9; font-size:15px; }
    @media (max-width:900px){
      .grid { grid-template-columns: 1fr; }
      .barOuter { width:160px; }
      .big { font-size:28px; }
    }
  </style>
</head>
<body>
  <div id="root" class="wrap"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    function TVDashboard(){
      const [agents, setAgents] = useState([]);
      const [now, setNow] = useState(Date.now());

      useEffect(()=> {
        load();
        const i = setInterval(()=> { load(); }, 5000);
        const tick = setInterval(()=> setNow(Date.now()), 1000);
        // listen to storage events
        const onStorage = (e) => {
          if (e.key && (e.key.startsWith('agent:') || e.key === '__axxess_last_update')){
            load();
          }
        };
        window.addEventListener('storage', onStorage);
        return ()=> { clearInterval(i); clearInterval(tick); window.removeEventListener('storage', onStorage); }
      }, []);

      function load(){
        const keys = Object.keys(localStorage).filter(k=>k.startsWith('agent:'));
        const data = keys.map(k => JSON.parse(localStorage.getItem(k))).filter(Boolean);
        // sort by progress desc
        data.forEach(a => { a.progress = a.target ? (Number(a.sales || 0) / Number(a.target)) * 100 : 0; });
        data.sort((a,b)=> (b.progress || 0) - (a.progress || 0));
        setAgents(data);
      }

      // Team totals use all agents' target+sales
      const teamSales = agents.reduce((s,a)=> s + Number(a.sales || 0), 0);
      const teamTarget = agents.reduce((s,a)=> s + Number(a.target || 0), 0);
      const teamProgress = teamTarget > 0 ? (teamSales / teamTarget) * 100 : 0;

      return (
        <div>
          <header>
            <img src="https://www.google.com/url?sa=i&url=https%3A%2F%2Fwww.facebook.com%2FAxxess.Internet%2F&psig=AOvVaw2YpDMUMY_-TjVgyI3Cuy0U&ust=1761312122907000&source=images&cd=vfe&opi=89978449&ved=0CBUQjRxqFwoTCPja__C2upADFQAAAAAdAAAAABAK" alt="Logo" />
            <div>
              <h1>Axxess — Live Sales TV</h1>
              <div className="muted">Displaying progress % only. Team totals drive the team progress metric.</div>
            </div>
          </header>

          <div className="grid" style={{marginTop:12}}>
            <div className="card">
              <div className="center">
                <
